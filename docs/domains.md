1. wwwドメイン（www.example.com）

目的

外部公開用。プロダクト説明とログイン導線。SaaSの玄関。

画面（最低限）
	1.	/ (Landing / LP)
	•	サービス概要
	•	CTAボタン（例：「ログイン」「問い合わせ」）
	•	ここには内部のコンテンツや顧客データは一切出さない
	2.	/legal/* 等（任意だが置き場所だけ用意しておく）
	•	利用規約、プライバシーポリシー等を置く予定のパス
	•	雛形では中身はプレースホルダでよい
	3.	/login or https://app.example.com/login への誘導
	•	実装的にはwww側のログインはボタンだけでOK
（ログイン画面自体はapp側に置く想定でいい。wwwは“説明サイト”にとどめる）

アクセス権
	•	ログイン不要、誰でも見れる。
	•	RLSも権限ロジックも絡まないので、ここは超シンプル。

注意
	•	wwwには「管理画面っぽいルート」は置かない。
例：/dashboard みたいなものは置かない。
誤クリックで内部画面に見えるページを出すと責任の境界が曖昧になる。

⸻

2. appドメイン（app.example.com）

目的

日常業務用。member/admin/owner 全員が基本ここを使う。

ここは「現場の仕事場」。SaaS本体。

画面（最低限）
	1.	/dashboard
	•	ログイン後のホーム
	•	表示内容（雛形ではダミーでOK）：
	•	自分の名前
	•	現在アクティブな組織名
	•	“今日やること” 的プレースホルダ
	•	admin / owner の場合は、ここに「チーム確認に進む」など管理系リンクを追加してもよい
（ただし請求とか凍結とかは出さない）
	2.	/switch-org
	•	組織切り替えUI
	•	所属している組織一覧を表示して選択させる
	•	選択後はServer Actionに投げる（仕様はさっき確定した通り）
	•	ここは全ロールが見られる
	3.	/profile
	•	ログイン中ユーザーの基本情報を表示
	•	表示内容（雛形では）：
	•	user_id
	•	現在のorg名 / org_id
	•	自分のrole（member/admin/ownerのいずれか）
	•	他ユーザーの情報は出さない
	4.	（将来用）/team or /reports のダミー
	•	admin / owner の場合だけナビに出してよい（条件付き）
	•	ここは“組織全体の進捗確認”みたいな立ち位置の予定枠
	•	雛形では中身は「この画面はadmin/owner向けレビュー用です」程度のプレースホルダで十分

アクセス権
	•	member, admin, owner 全員ログイン可能。
	•	出すメニュー・タブだけロールで出し分ける。
	•	重要：appでは組織の支払い情報や凍結スイッチは出さない
それらはadminドメインに隔離する。

⸻

3. adminドメイン（admin.example.com）

目的

組織の管理／ユーザー管理／請求・契約まわり。
日常オペではなく、管理・責任・契約の話をする場所。

adminとownerだけが入る領域。memberはここに入れない。

画面（最低限）
	1.	/overview
	•	現在アクティブな組織の概要
	•	表示内容（雛形ではダミーでOK）：
	•	組織名
	•	組織の状態（active / suspended / termination_requested などのプレースホルダ）
	•	メンバー数
	•	adminとownerの両方に見える
	2.	/members
	•	組織内ユーザー一覧と管理UI
	•	admin機能：
	•	ユーザーの作成・更新・無効化
	•	member/adminロールの切り替え
	•	owner機能：
	•	追加で、admin権限の付け替え（誰をadminにするか）
	•	owner権限の譲渡ボタンも最終的にはここに出る予定
	•	雛形では一覧と権限編集フォームの形だけ用意すればいい（実装はダミーでもOK）
	3.	/org-settings
	•	ここはowner専用タブ（adminには見せない or read-onlyにして403でもよい）
	•	内容：
	•	支払い情報の編集フォーム（請求先名、請求メールなどダミー項目）
	•	組織ステータス操作UI：
	•	「凍結する」「解約手続きに進める」などのボタン（ダミーでOK）
	•	owner権限の譲渡
	•	これらのアクションはactivity_logsに記録される前提でUIラベルに明記しておくといい
（例：「この操作は監査ログに記録されます」）

アクセス権
	•	admin ロール → /overview, /members までアクセス可
/org-settings は原則403
	•	owner ロール → /overview, /members, /org-settings すべてアクセス可
	•	member ロール → adminドメイン自体403

注意
	•	adminドメインで「現場業務の細かい入力フォーム」「日々のタスクUI」を出さない
それはappの領域。
adminは“会社の設定管理と責任処理”だけにする。ラインを崩さない。

⸻

4. opsドメイン（ops.example.com）

目的

SaaS提供側のサポート・運用・監査向け。社内用コンソール。

今回の雛形では「存在だけ定義しておき、ほぼ空のままにしておく」が正しい。中途半端に作りこむと法的にだるい。

画面（雛形として）
	1.	/
	•	“Internal only / ops only” と明記したダミーページ
	•	アクセス権のないロールは403
	•	ここに「本番ではここからサポート用ツールに入ります」程度の文面だけ置いておく

アクセス権
	•	ops ロールのみ200
	•	それ以外は403固定
	•	RLS的にもopsだけは将来的に「複数orgを横断確認できる」想定をコメントで残す
ただし今回の雛形では実装しない・データ見せない

⸻

5. 4ドメインの責任分離まとめ（短く言うとこう）
	•	www
宣伝・案内・ログイン導線。営業用の顔。顧客データなし。
	•	app
日常業務のメイン画面。全ロールが使う。
memberが基準。admin/ownerはここで「見えるタブが増える」だけ。
組織そのものを壊す操作は置かない。
	•	admin
組織の管理画面。admin/owner用。
ユーザー管理（CRUD）、権限管理、支払い・契約、組織の凍結/解約、オーナー交代。
memberは入れない。ここは“会社としての意思決定ゾーン”。
	•	ops
事業者側の社内ツール用。今回はダミーのみ。
将来的にサポート・監査・障害対応で使う。

⸻
